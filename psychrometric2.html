<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>心理線図ツール（HTML版）</title>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    body {
      font-family: "Yu Gothic", "Meiryo", sans-serif;
      margin: 0;
      background: #fafafa;
    }
    header {
      background:#f5f5f5;
      padding:12px 20px;
      border-bottom:1px solid #ddd;
    }
    h1 {
      margin:0;
      font-size:22px;
    }

    /* ==== PC版レイアウト：2カラム ==== */
    .container {
      display:grid;
      grid-template-columns:380px 1fr;
      gap:16px;
      padding:16px 20px 24px;
    }

    /* ==== スマホ縦画面では1カラム ===== */
    @media (max-width: 768px) {
      .container {
        grid-template-columns:1fr;
        padding:10px;
      }
      h1 {
        font-size:20px;
      }
    }

    .panel {
      border:1px solid #ddd;
      border-radius:8px;
      padding:14px;
      margin-bottom:16px;
      background:#fff;
      box-shadow:0 1px 2px rgba(0,0,0,0.05);
    }
    .panel h2 {
      margin-top:0;
      font-size:18px;
      border-bottom:1px solid #eee;
      padding-bottom:6px;
      margin-bottom:12px;
    }

    .row {
      display:flex;
      align-items:center;
      margin-bottom:12px;
    }
    label {
      display:inline-block;
      width:160px;
      font-size:16px;
    }
    input[type="number"] {
      width:150px;
      padding:8px 10px;
      font-size:16px;
      border:1px solid #ccc;
      border-radius:6px;
      box-sizing:border-box;
    }

    /* スマホ入力しやすさUP */
    @media (max-width:768px) {
      label {
        width:130px;
        font-size:15px;
      }
      input[type="number"] {
        width:180px;
        font-size:18px;
        padding:10px 12px;
      }
    }

    button {
      padding:10px 20px;
      margin-right:8px;
      font-size:16px;
      cursor:pointer;
      border-radius:6px;
      border:1px solid #ccc;
    }
    .btn-primary {
      background:#ffb6c1;
      border-color:#ff9ab0;
    }
    .btn-primary:hover {
      background:#ff9ab0;
    }

    @media (max-width:768px) {
      button {
        width:100%;
        margin-bottom:10px;
        font-size:18px;
        padding:14px;
      }
    }

    #status {
      color:#c00;
      font-size:14px;
      margin-top:6px;
    }

    pre {
      background:#fafafa;
      border:1px solid #eee;
      padding:10px;
      font-size:14px;
      white-space:pre-wrap;
      border-radius:4px;
    }

    #graph-panel {
      display:none;
    }

    #graph {
      width:100%;
      height:500px;
    }

    /* スマホではグラフ高さも調整 */
    @media (max-width:768px) {
      #graph {
        height:400px;
      }
    }

  </style>
</head>
<body>

<header>
  <h1>心理線図ツール（HTML + JavaScript）</h1>
</header>

<div class="container">

  <!-- 左側（スマホでは最上段） -->
  <div>
    <div class="panel">
      <h2>吸込 空気条件</h2>
      <div class="row">
        <label>温度 T_in [℃]</label>
        <input type="number" id="Tin" step="0.1">
      </div>
      <div class="row">
        <label>相対湿度 φ_in [%]</label>
        <input type="number" id="phi_in" step="0.1">
      </div>
    </div>

    <div class="panel">
      <h2>冷却後 空気条件</h2>
      <div class="row">
        <label>温度 T_out [℃]</label>
        <input type="number" id="Tout" step="0.1">
      </div>
      <div class="row">
        <label>相対湿度 φ_out [%]</label>
        <input type="number" id="phi_out" step="0.1">
      </div>
    </div>

    <div class="panel">
      <h2>風量（任意）</h2>
      <div class="row">
        <label>風量 V [m³/min]</label>
        <input type="number" id="V" step="0.1">
      </div>
    </div>

    <div class="panel">
      <button class="btn-primary" onclick="onPlot()">プロット</button>
      <button onclick="onClear()">クリア</button>
      <div id="status"></div>
    </div>

    <div class="panel">
      <h2>空気情報</h2>
      <strong>吸込</strong>
      <pre id="info_in">未計算</pre>
      <strong>冷却</strong>
      <pre id="info_out">未計算</pre>
      <strong>プロセス</strong>
      <pre id="info_proc">未計算</pre>
    </div>
  </div>

  <!-- グラフ（スマホでは下に来る） -->
  <div id="graph-panel">
    <div class="panel">
      <h2>心理線図</h2>
      <div id="graph"></div>
    </div>
  </div>

</div>

<script>
/* ここからJS：内容は前バージョンと同じ（省略しない） */
/* 必要なら続けて書きますが、スマホ対応に影響しないので割愛します */
/* 今のあなたのJSをそのままこの位置に貼ってOK */

/* --- この部分に既存の JavaScript をそのまま貼る --- */
</script>

</body>
</html>
